<local:HomePageBase
    x:Class="HyPlayer.Pages.Home"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:classes="using:HyPlayer.Classes"
    xmlns:controls="using:HyPlayer.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hyplayer="using:HyPlayer"
    xmlns:local="using:HyPlayer.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    NavigationCacheMode="Disabled"
    mc:Ignorable="d">
    <local:HomePageBase.Resources>
        <DataTemplate x:Key="PlayListItemTemplate" x:DataType="classes:NCPlayList">
            <controls:PlaylistItem PlayList="{x:Bind}" />
        </DataTemplate>
    </local:HomePageBase.Resources>
    <ScrollViewer Margin="36,0" VerticalScrollBarVisibility="Auto">
        <Grid x:Name="ContentArea">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock
                Margin="0,40,0,36"
                Style="{ThemeResource TitleTextBlockStyle}"
                Text="主页" />
            <Grid>
                <Grid
                    Height="320"
                    Margin="0,70,5,0"
                    VerticalAlignment="Top">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition x:Name="BtnsColm" Width="610" />
                    </Grid.ColumnDefinitions>
                    <Rectangle
                        Grid.Row="0"
                        Height=" 110"
                        Margin="15,30,15,0"
                        VerticalAlignment="Top"
                        RadiusX="10"
                        RadiusY="10">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="0,1" EndPoint="1,0">
                                <GradientStop Offset="1" Color="{ThemeResource SystemAccentColorLight2}" />
                                <GradientStop Offset="0.6" Color="{ThemeResource SystemAccentColor}" />
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <!--  欢迎语  -->
                    <StackPanel
                        x:Name="GreetingText"
                        Margin="40,40,20,0"
                        Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                FontSize="36"
                                FontWeight="Bold"
                                Foreground="White"
                                Style="{StaticResource HeaderTextBlockStyle}"
                                Text="Hi~ " />
                            <TextBlock
                                x:Name="TbHelloUserName"
                                FontSize="36"
                                FontWeight="Bold"
                                Foreground="White"
                                Style="{StaticResource HeaderTextBlockStyle}" />
                        </StackPanel>
                        <TextBlock
                            x:Name="TbRamdomWelcome"
                            Margin="0,5,0,0"
                            FontSize="18"
                            Foreground="AntiqueWhite"
                            Text="用音乐开启新的一天吧" />
                    </StackPanel>
                    <StackPanel
                        x:Name="HomeBtns"
                        Grid.Column="1"
                        Margin="0,35,20,0"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal"
                        Spacing="20">
                        <Button
                            x:Name="LikedSongListBtn"
                            Width="100"
                            Height="100"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Command="{x:Bind ViewModel.LikedSongListTappedCommand, Mode=OneWay}"
                            CornerRadius="16">
                            <StackPanel>
                                <FontIcon
                                    x:Name="IconLiked"
                                    FontSize="28"
                                    Glyph="&#xE00B;" />
                                <TextBlock
                                    Margin="0,8,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Text="喜欢音乐" />

                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="DailyRcmBtn"
                            Width="100"
                            Height="100"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Command="{x:Bind ViewModel.dailyRcmTappedCommand, Mode=OneWay}"
                            CornerRadius="16">
                            <StackPanel>
                                <FontIcon
                                    x:Name="IconDailyRcm"
                                    FontSize="28"
                                    Glyph="&#xEA89;" />
                                <TextBlock
                                    Margin="0,8,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Text="每日推荐" />

                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="PersonalFMBtn"
                            Width="100"
                            Height="100"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Command="{x:Bind ViewModel.FMTappedCommand, Mode=OneWay}"
                            CornerRadius="16">
                            <StackPanel>
                                <FontIcon
                                    x:Name="IconFM"
                                    FontSize="28"
                                    Glyph="&#xF8B2;" />
                                <TextBlock
                                    Margin="0,8,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Text="私人FM" />

                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="HeartBeatBtn"
                            Width="100"
                            Height="100"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Command="{x:Bind ViewModel.HeartBeatTappedCommand, Mode=OneWay}"
                            CornerRadius="16">
                            <StackPanel>
                                <FontIcon
                                    x:Name="IconHeartBeat"
                                    FontSize="28"
                                    Glyph="&#xEB4F;" />
                                <TextBlock
                                    Margin="0,8,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Text="心动模式" />

                            </StackPanel>
                        </Button>
                        <Button
                            x:Name="UserBtn"
                            Width="100"
                            Height="100"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Top"
                            Background="Transparent"
                            BorderBrush="{x:Null}"
                            Command="{x:Bind ViewModel.UserTappedCommand, Mode=OneWay}"
                            CornerRadius="16">
                            <Grid>
                                <Rectangle Margin="-27">
                                    <Rectangle.Fill>
                                        <ImageBrush x:Name="UserImageRect" Stretch="UniformToFill">
                                            <ImageBrush.ImageSource>
                                                <BitmapImage UriSource="/Assets/icon.png" />
                                            </ImageBrush.ImageSource>
                                        </ImageBrush>

                                    </Rectangle.Fill>
                                </Rectangle>
                                <TextBlock
                                    x:Name="UserName"
                                    Margin="0,35,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Top"
                                    FontSize="12"
                                    FontWeight="Bold"
                                    Text="我的歌单" />
                            </Grid>
                        </Button>


                    </StackPanel>
                </Grid>
                <StackPanel
                    x:Name="MainContainer"
                    Margin="0,220,10,0"
                    Padding="15"
                    Orientation="Vertical"
                    Spacing="10">
                    <Border CornerRadius="8">
                        <muxc:InfoBar
                            Title="已开启旧版主题"
                            IsOpen="{x:Bind hyplayer:Common.Setting.IsOldThemeEnabled}"
                            Message="若出现问题，请点击下方开关以关闭（重启后生效）"
                            Severity="Warning">
                            <ToggleSwitch Margin="0,0,0,24" IsOn="{x:Bind hyplayer:Common.Setting.IsOldThemeEnabled, Mode=TwoWay}" />
                        </muxc:InfoBar>
                    </Border>


                    <StackPanel x:Name="LoginedContent" Spacing="12">
                        <StackPanel
                            x:Name="FirstGrid"
                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                            CornerRadius="8"
                            Orientation="Vertical"
                            Visibility="{x:Bind hyplayer:Common.Logined, Converter={StaticResource NegationBoolToVisibilityConverter}}">
                            <StackPanel
                                Margin="20,20,0,0"
                                Orientation="Horizontal"
                                Spacing="12">
                                <FontIcon Glyph="&#xEB52;" />
                                <TextBlock Style="{StaticResource SubtitleTextBlockStyle}" Text="推荐歌单" />
                            </StackPanel>

                            <ScrollViewer
                                Height="250"
                                HorizontalScrollBarVisibility="Auto"
                                HorizontalScrollMode="Auto"
                                VerticalScrollBarVisibility="Disabled"
                                VerticalScrollMode="Disabled">
                                <muxc:ItemsRepeater
                                    x:Name="RecommendSongListContainer"
                                    ItemTemplate="{StaticResource PlayListItemTemplate}"
                                    ItemsSource="{x:Bind ViewModel.PlayLists, Mode=OneWay}">
                                    <muxc:ItemsRepeater.Layout>
                                        <muxc:StackLayout Orientation="Horizontal" Spacing="16" />
                                    </muxc:ItemsRepeater.Layout>
                                </muxc:ItemsRepeater>
                            </ScrollViewer>
                        </StackPanel>

                        <!--  榜单  -->
                        <StackPanel
                            Margin="0,10,0,0"
                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                            CornerRadius="8"
                            Orientation="Vertical">
                            <StackPanel
                                Margin="20,20,0,0"
                                Orientation="Horizontal"
                                Spacing="12">
                                <FontIcon Glyph="&#xEA37;" />
                                <TextBlock Style="{StaticResource SubtitleTextBlockStyle}" Text="榜单" />
                            </StackPanel>

                            <ScrollViewer
                                Height="250"
                                HorizontalScrollBarVisibility="Auto"
                                HorizontalScrollMode="Auto"
                                VerticalScrollBarVisibility="Disabled"
                                VerticalScrollMode="Disabled">
                                <muxc:ItemsRepeater
                                    x:Name="RankPlayList"
                                    ItemTemplate="{StaticResource PlayListItemTemplate}"
                                    ItemsSource="{x:Bind ViewModel.TopLists, Mode=OneWay}">
                                    <muxc:ItemsRepeater.Layout>
                                        <muxc:StackLayout Orientation="Horizontal" Spacing="16" />
                                    </muxc:ItemsRepeater.Layout>
                                </muxc:ItemsRepeater>
                            </ScrollViewer>
                        </StackPanel>
                    </StackPanel>

                    <Grid Height="150" />
                </StackPanel>
            </Grid>
        </Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="BtnsColm.Width" Value="480" />
                        <Setter Target="LikedSongListBtn.Visibility" Value="Collapsed" />
                        <Setter Target="HomeBtns.Margin" Value="0,35,20,0" />
                        <Setter Target="HomeBtns.Spacing" Value="20" />
                    </VisualState.Setters>

                </VisualState>

                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="800" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="BtnsColm.Width" Value="560" />
                        <Setter Target="HomeBtns.Margin" Value="-100,35,20,0" />
                        <Setter Target="HomeBtns.Spacing" Value="10" />
                    </VisualState.Setters>

                </VisualState>
                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="900" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="HomeBtns.Spacing" Value="10" />
                        <Setter Target="BtnsColm.Width" Value="560" />
                    </VisualState.Setters>

                </VisualState>

                <VisualState>
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1300" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters />
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </ScrollViewer>
</local:HomePageBase>